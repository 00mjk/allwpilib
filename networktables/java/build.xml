<?xml version="1.0" encoding="UTF-8"?>

	
<!--
Network Tables 2.0 Build script

by Mitchell Wills
mwills@wpi.edu


clean: clean
all: build everything
dist: just build the desktop and crio jars
desktop: build the desktop jar
crio: build the crio jar
javadoc: build the javadoc
test: run the junit test and instrument them with emma

 -->
 
<project basedir="." name="Network_Tables_2.0" default="all">
	<property file="${user.home}/.sunspotfrc.properties"/>
	
	
	<target name="all" depends="clean,dist,test,javadoc" />
	<target name="dist" depends="clean,build-desktop,build-crio,dist-tests" />
	
	<!-- input folders -->
	<property name="src.dir" value="src/common" />
	<property name="crio.src.dir" value="src/crio" />
	<property name="desktop.src.dir" value="src/desktop" />
	<property name="test.dir" value="test" />
 	<property name="lib.dir" value="lib" />
	
	<!-- output folders -->
	<property name="build.dir" value="build" />
	<property name="dist.dir" value="dist" />
	
	<property name="jar-base-name" value="networktables" />
	<property name="jar-suffix" value="" />
	
	
	
	
	
	<import file="ant/crio.xml"/>
	<import file="ant/desktop.xml"/>
	<import file="ant/test.xml"/>
	<import file="ant/javadoc.xml"/>
	
	
  

	<!-- Import enviornment properties and set defaults -->
	<property environment="env"/>
	<condition property="BUILD_NUMBER" value="${env.BUILD_NUMBER}" else="LOCAL">
		<isset property="env.BUILD_NUMBER"/>
	</condition>
	<tstamp>
		<format property="BUILD_START" pattern="yyyy-MM-dd_hh-mm-ss" locale="en,US"/>
	</tstamp>
	<condition property="BUILD_ID" value="${env.BUILD_ID}" else="${BUILD_START}">
		<isset property="env.BUILD_ID"/>
	</condition>
	<condition property="SVN_REVISION" value="${env.SVN_REVISION}" else="LOCAL">
		<isset property="env.SVN_REVISION"/>
	</condition>
	<condition property="BUILD_TYPE" value="${env.BUILD_TYPE}" else="CUSTOM">
		<isset property="env.BUILD_TYPE"/>
	</condition>
	
	
	
	<echo>Building NetworkTables 2.0</echo>
	<echo>Build Number: ${BUILD_NUMBER}</echo>
	<echo>Build Time: ${BUILD_ID}</echo>
	<echo>SVN Revision: ${SVN_REVISION}</echo>
	<echo>Build Type: ${BUILD_TYPE}</echo>
	
	
	
	
	<!-- build targets -->
	<target name="clean">
		<delete dir="${build.dir}" />
		<delete dir="${dist.dir}" />
	</target>

	
</project>
